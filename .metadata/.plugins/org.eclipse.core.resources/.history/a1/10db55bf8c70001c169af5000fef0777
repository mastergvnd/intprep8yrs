package paypal;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.PriorityQueue;

import org.junit.Assert;

public class _B25ReconstructItinerary {

	public static void main(String[] args) {
		List<List<String>> tickets = new ArrayList<List<String>>();
		tickets.add(new ArrayList(Arrays.asList("Chennai", "Banglore")));
		tickets.add(new ArrayList(Arrays.asList("Bombay", "Delhi")));
		tickets.add(new ArrayList(Arrays.asList("Goa", "Chennai")));
		tickets.add(new ArrayList(Arrays.asList("Delhi", "Goa")));
		
//		List<String> itinerary = findItinerary(tickets);
//		System.out.println(itinerary);
//		Assert.assertEquals(new ArrayList(Arrays.asList("Bombay", "Delhi", "Goa", "Chennai", "Banglore")), itinerary);
//		
		tickets = new ArrayList<List<String>>();
		tickets.add(new ArrayList(Arrays.asList("JFK_NY", "SFO")));
		tickets.add(new ArrayList(Arrays.asList("JFK_NY", "ATL_GA")));
		tickets.add(new ArrayList(Arrays.asList("SFO", "ATL_GA")));
		tickets.add(new ArrayList(Arrays.asList("ATL_GA", "JFK_NY")));
		tickets.add(new ArrayList(Arrays.asList("ATL_GA", "SFO")));
		System.out.println(tickets);
		findItinerary(tickets);
	}

	public static List<String> findItinerary(List<List<String>> tickets) {
		List<String> result = new ArrayList<String>();
		if(tickets.size() == 0)
			return result;
		Map<String, List<String>> itinerary = new HashMap<String, List<String>>();
		for(List<String> ticket : tickets) {
			List<String> destinations = itinerary.getOrDefault(ticket.get(0), new ArrayList<String>());
			destinations.add(ticket.get(1));
			itinerary.put(ticket.get(0), destinations);
		}
		String start = null;
		for(Map.Entry<String, List<String>> entry : itinerary.entrySet()) {
			if(!itinerary.containsValue(entry.getKey()))
				start = entry.getKey();
		}
		if(start == null)
			start = tickets.get(0).get(0);
		System.out.println("Start : " + start);
		System.out.println(itinerary);
		int i = 0
		while(start != null || i++ <10) {
			result.add(start);
			List<String> destinations = itinerary.get(start);
			if(destinations.size() > 0) {
				start = destinations.remove(0);
				result.add(start);
				itinerary.put(start, destinations);
			}
		}
		return result;
	}

}
